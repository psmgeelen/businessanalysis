---
title: "Linear Programming 2.0"
output: html_notebook
---

This notebook will give you an intro to Linear Programming in R. Our aim here is to let you write down the functions and constraints in the same form as inthe exam. Enjoy :)
<p></p><p></p>
<h3> CPLEX </h3>
In order to "just write down" the functions, we need to work with a particular format which is the "CPLEX". Its based on a more complicated engine that is used by big companies like IBM. R, of course, also provides a free alternative. The overal format is as follows.

![](figures/cplexformat.png)

This link provides a concrete guide for the use of this format:
http://lpsolve.sourceforge.net/5.0/CPLEX-format.htm
Note that this package also contains a free book from Fernandez that provide excellent examples for this method. The first template is provided on page 34, which is excerpted above.

<h4> Workflow CPLEX </h4>

The CPLEX format is based on ASCII file encoding. The workflow of creating a CPLEX file is a follows. You can create a new CPLEX file in RStudio is: click on the new file button. This will open a menu, select txt file. 
![](figures/openfile.png)

When everything has been entered in the correct CPLEX format, you can save the file by going on the menubar and clicking on the file button. 
![](figures/savefile.png)

From there you select the "Save file with encoding..." option. This will open another small screen with a few options of encoding, including ASCII. Select ASCII. After that you can select a path name for the file. Please note that if you save it as linear.programm.txt, you need to refer to it as such. In the examples above we used no extension (.txt, .doc, .docx, etc..) and therefore do not refer to one either in our commands.


<h3> Required Packages </h3>
There are 3 packages required to run these linear programms

<ul>
<li>glpkAPI</li>
<li>Rglpk</il>
</ul>

So lets install those by executing the code below:
```{r}
install.packages("glpkAPI")
install.packages("Rglpk")
```

Having installed the requried packages, we can run the generic code for linear programming which is:
```{r}
library(glpkAPI)
library(Rglpk)

problem <- initProbGLPK(ptrtype = "glpk_prob")

readLPGLPK(problem, "example_lp")

solveSimplexGLPK(problem)

printRangesGLPK(problem, fname = "report.txt")

file.show("report.txt")

```

In order to undestand the code above, I want to elaborate on what an API is. An API is an "Application Programming Interface". More simply put, its a way of communicating to other software. In order to use GLPK (GNU Linear Programming Kit), we need to create an object within this package. To do this we use the initProbGLPK, which initiates an empty object within the GLPK package. Note that this object is connected to R through an object in R, called "problem". More simply put: the "problem" object in R is the connection to the "glpk_prob" object in GLPK. These objects are in effect mirrors and connections. The read, solve and print commands dont require an object within R, since they are executed in the GLPK package.  Due to the fact that the real calculations are not run in R, the sensitivty report cannot be displayed in the terminal either. For this reason a file.show command has been used, to open the file when the calculations are done. 

<h3> Examples </h3>

There are examples of how to write Linear Programs in CPLEX in the book that is also added to this zip file. The book is called "Linear Programming.pdf".


<h4>Integer linear program: Two models of chairs.</h4>

The problem is described on p.57 of the book.
We have two models, in the first  we use integer variables, in the second binary integer variables.
We created furnituretypes_first and furnituretypes_second, check out the models within!

```{r Chairs example}
#having made the files, load them into GLPK

#first, create an object which is a GLPK problem
chairsprob1<-initProbGLPK(ptrtype = "glpk_prob")

#this function reads a file and puts it into the object we created
readLPGLPK(chairsprob1,"furnituretypes_first")

#just solves the problem
solveSimplexGLPK(chairsprob1)

#prints ranges from a problem object into a file
printRangesGLPK(chairsprob1, fname = "chairs1.txt")

#shows the file
file.show("chairs1.txt")

#same for the second chairs problem.

chairsprob2<-initProbGLPK(ptrtype = "glpk_prob")
readLPGLPK(chairsprob2,"furnituretypes_second")
solveSimplexGLPK(chairsprob2)
printRangesGLPK(chairsprob2, fname = "chairs2.txt")
file.show("chairs2.txt")
```

